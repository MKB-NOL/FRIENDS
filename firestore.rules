rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Quizzes collection
    match /quizzes/{quizId} {
      allow create: if request.auth == null; // No auth required
      allow read: if true; // Public read
      allow update: if false; // No updates allowed
      allow delete: if false; // No deletes allowed
      
      // Scores subcollection
      match /scores/{scoreId} {
        allow create: if request.auth == null && 
          request.resource.data.name is string &&
          request.resource.data.name.size() >= 2 &&
          request.resource.data.name.size() <= 20 &&
          request.resource.data.score is number &&
          request.resource.data.score >= 0 &&
          request.resource.data.score <= 10;
        allow read: if true; // Public read
        allow update: if false;
        allow delete: if false;
      }
    }
  }
}
